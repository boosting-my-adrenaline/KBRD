import { fontWeight } from '@mui/system'
import React, { useState, useEffect, useRef } from 'react'
import { useDidMountEffect } from '../../../utils/useDidMountEffect'

interface IProps {
  frameColor: string
  cellsLength: number
  handleStart(): void
  started: boolean
  handleRunning(): void
  isThereCells: boolean
  newGame: boolean
}

export const TAPshootingFrame: React.FC<IProps> = ({
  frameColor,
  cellsLength,
  handleStart,
  started,
  handleRunning,
  isThereCells,
  newGame,
}) => {
  const [dimensions, setDimensions] = useState({
    width: 766,
    height: 620,
    clipPath1: `polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%,${``} 1% 50%, 25.5% 98.75%,${``} 74.5% 98.75%, 99% 50%, 74.5% 1.15%, 25.5% 1.15%,${``} 1% 50%, 0% 50%)`,
    clipPath2: `polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)`,
  })

  useEffect(() => {
    if (cellsLength === 19 || cellsLength === 7) {
      return setDimensions({
        width: 766,
        height: 620,
        clipPath1: `polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%,${``} 1% 50%, 25.5% 98.75%,${``} 74.5% 98.75%, 99% 50%, 74.5% 1.15%, 25.5% 1.15%,${``} 1% 50%, 0% 50%)`,
        clipPath2: `polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)`,
      })
    } else {
      return setDimensions({
        width: 1110,
        height: 620,
        clipPath1: `polygon(18% 0%, 82% 0%, 100% 50%, 82% 100%, 18% 100%, 0% 50%,${``} 1% 50%, 18.5% 98.5%,${``} 81.5% 98.5%, 99% 50%, 81.5% 1.5%, 18.5% 1.5%,${``} 1% 50%, 0% 50%)`,
        clipPath2: `polygon(18% 0%, 82% 0%, 100% 50%, 82% 100%, 18% 100%, 0% 50%`,
      })
    }
  }, [cellsLength])

  const [starter, setStarter] = useState(0)
  const [stopper, setStopper] = useState(0)
  const [bluring, setBluring] = useState(true)

  const [TY, setTY] = useState(0)

  useDidMountEffect(() => {
    started ? setStarter((prev) => prev + 1) : setStopper((prev) => prev + 1)
  }, [started])

  useDidMountEffect(() => {
    setTY((prev) => prev - 1200)
    let id1 = setTimeout(() => setTY((prev) => prev - 600), 1000)
    let id2 = setTimeout(() => setTY((prev) => prev - 600), 2000)
    let id3 = setTimeout(() => setTY((prev) => prev - 600), 3000)
    let id4 = setTimeout(() => setTY((prev) => prev - 600), 4000)
    let id5 = setTimeout(() => handleRunning(), 3200)
    let id6 = setTimeout(() => setBluring(false), 3100)
    let id7 = setTimeout(() => setTY(0), 3500)

    return () => {
      clearTimeout(id1)
      clearTimeout(id2)
      clearTimeout(id3)
      clearTimeout(id4)
      clearTimeout(id5)
      clearTimeout(id6)
      clearTimeout(id7)
    }
  }, [starter])

  useDidMountEffect(() => {
    handleRunning()
    setBluring(true)
    setTimeout(() => setTY(0))
  }, [stopper])

  useEffect(() => {}, [started])

  return (
    <>
      {' '}
      <div
        className="absolute flex justify-center items-center overflow-y-hidden"
        style={{
          backdropFilter: bluring && isThereCells ? 'blur(15px)' : '',
          width: dimensions.width,
          height: dimensions.height,
          clipPath: dimensions.clipPath2,
          transition: '0.25s ease',
        }}
      >
        <div
          //inside
          className={`flex flex-row justify-center items-center  ${
            !bluring && `hidden`
          }`}
          style={{
            transition: '0.3s ease',
            transform: 'rotateZ(0deg) translateX(0px)',
          }}
        >
          <div
            className="absolute flex flex-row justify-center items-center gap-24"
            style={{
              transition: '0.3s ease',
              transform: `rotateZ(0deg) translateY(${TY}px)`,
            }}
          >
            {newGame ? (
              <div
                onMouseDown={handleStart}
                className={`flex flex-col items-center justify-center font-courier cursor-pointer text-${
                  started ? '' : 'blue'
                }-600`}
                style={{
                  width: '700px',
                  fontSize: '4em',
                  fontWeight: 700,
                  transition: '0.1s ease-in',
                }}
              >
                <div className=""> PRESS SPACE BAR</div>

                <div className=""> OR</div>

                <div className=""> TAP TO START</div>
              </div>
            ) : (
              <>
                <div
                  className="rounded-3xl bg-blue-400 border-2 border-blue-600"
                  style={{ width: 100, height: 400, transition: '0.25s ease' }}
                ></div>
                <div
                  className="rounded-3xl bg-blue-400 border-2 border-blue-600"
                  style={{ width: 100, height: 400, transition: '0.25s ease' }}
                ></div>
              </>
            )}
          </div>

          <div
            className="absolute flex flex-row justify-center items-center overflow-visible"
            style={{
              transition: '0.3s ease',
              width: 500,
              height: 500,
              transform: `translateY(${TY + 1200}px)`,
            }}
          >
            <svg
              height={'100%'}
              width={'100%'}
              viewBox="1 1.5 30 30"
              xmlns="http://www.w3.org/2000/svg"
            >
              //333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
              <g fill="none" fillRule="evenodd">
                <path
                  d="M15.117 13.49c1.146 0 2.134-.335 2.963-1.008.828-.673 1.243-1.64 1.243-2.898 0-.96-.331-1.785-.991-2.476-.66-.692-1.551-1.038-2.673-1.038-.76 0-1.386.106-1.878.318-.493.212-.882.492-1.17.84-.285.35-.556.799-.812 1.347a70.661 70.661 0 00-.701 1.552c-.124.26-.35.467-.673.616a2.64 2.64 0 01-1.121.225c-.5 0-.956-.203-1.374-.608-.417-.405-.626-.944-.626-1.617 0-.648.196-1.33.589-2.046.392-.717.965-1.4 1.719-2.047.754-.648 1.692-1.168 2.813-1.561 1.122-.392 2.374-.59 3.757-.59 1.209 0 2.312.166 3.309.497.997.33 1.863.807 2.598 1.43a6.175 6.175 0 011.664 2.168c.373.822.56 1.707.56 2.654 0 1.246-.271 2.315-.813 3.206-.542.89-1.318 1.76-2.327 2.607.972.523 1.79 1.122 2.458 1.794a6.904 6.904 0 011.505 2.234 6.88 6.88 0 01.504 2.645 8.253 8.253 0 01-.682 3.29 8.383 8.383 0 01-2.01 2.83c-.884.83-1.934 1.478-3.15 1.945-1.214.468-2.556.7-4.027.7-1.495 0-2.835-.267-4.018-.802-1.184-.536-2.16-1.206-2.926-2.01-.766-.803-1.346-1.635-1.738-2.495-.393-.86-.59-1.57-.59-2.131 0-.723.235-1.305.702-1.748.467-.442 1.05-.663 1.748-.663.349 0 .685.103 1.009.308.324.206.536.452.636.739.648 1.732 1.342 3.018 2.084 3.859.74.842 1.785 1.262 3.13 1.262.773 0 1.518-.19 2.234-.57.717-.38 1.309-.944 1.776-1.692.467-.747.7-1.613.7-2.598 0-1.458-.398-2.601-1.195-3.43-.798-.828-1.907-1.243-3.327-1.243-.25 0-.636.025-1.16.075-.523.05-.86.075-1.01.075-.684 0-1.214-.171-1.588-.514-.373-.343-.56-.82-.56-1.43 0-.598.224-1.081.673-1.45.448-.366 1.115-.55 2-.55h.766z"
                  fill="#60a5fa"
                />
                <path
                  d="M15.117 13.49c1.146 0 2.134-.335 2.963-1.008.828-.673 1.243-1.64 1.243-2.898 0-.96-.331-1.785-.991-2.476-.66-.692-1.551-1.038-2.673-1.038-.76 0-1.386.106-1.878.318-.493.212-.882.492-1.17.84-.285.35-.556.799-.812 1.347a70.661 70.661 0 00-.701 1.552c-.124.26-.35.467-.673.616a2.64 2.64 0 01-1.121.225c-.5 0-.956-.203-1.374-.608-.417-.405-.626-.944-.626-1.617 0-.648.196-1.33.589-2.046.392-.717.965-1.4 1.719-2.047.754-.648 1.692-1.168 2.813-1.561 1.122-.392 2.374-.59 3.757-.59 1.209 0 2.312.166 3.309.497.997.33 1.863.807 2.598 1.43a6.175 6.175 0 011.664 2.168c.373.822.56 1.707.56 2.654 0 1.246-.271 2.315-.813 3.206-.542.89-1.318 1.76-2.327 2.607.972.523 1.79 1.122 2.458 1.794a6.904 6.904 0 011.505 2.234 6.88 6.88 0 01.504 2.645 8.253 8.253 0 01-.682 3.29 8.383 8.383 0 01-2.01 2.83c-.884.83-1.934 1.478-3.15 1.945-1.214.468-2.556.7-4.027.7-1.495 0-2.835-.267-4.018-.802-1.184-.536-2.16-1.206-2.926-2.01-.766-.803-1.346-1.635-1.738-2.495-.393-.86-.59-1.57-.59-2.131 0-.723.235-1.305.702-1.748.467-.442 1.05-.663 1.748-.663.349 0 .685.103 1.009.308.324.206.536.452.636.739.648 1.732 1.342 3.018 2.084 3.859.74.842 1.785 1.262 3.13 1.262.773 0 1.518-.19 2.234-.57.717-.38 1.309-.944 1.776-1.692.467-.747.7-1.613.7-2.598 0-1.458-.398-2.601-1.195-3.43-.798-.828-1.907-1.243-3.327-1.243-.25 0-.636.025-1.16.075-.523.05-.86.075-1.01.075-.684 0-1.214-.171-1.588-.514-.373-.343-.56-.82-.56-1.43 0-.598.224-1.081.673-1.45.448-.366 1.115-.55 2-.55h.766z"
                  stroke="#2563eb"
                  strokeLinejoin="round"
                />
                <path
                  d="M10.59 5.787c.608-.522 1.392-.954 2.331-1.282C13.877 4.17 14.974 4 16.182 4"
                  stroke="#FFF"
                  strokeDasharray="1,2,6,2,3"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <path
                  d="M25.116 21.204a7.818 7.818 0 01-.618 2.622 7.927 7.927 0 01-1.89 2.664 9.14 9.14 0 01-2.988 1.842c-1.152.443-2.446.668-3.849.668-1.418 0-2.7-.256-3.812-.759-1.12-.508-2.052-1.147-2.77-1.9-.725-.759-1.278-1.552-1.645-2.358-.25-.546-.409-1.02-.486-1.424-.035.156-.058.32-.058.501 0 .487.183 1.134.544 1.923.367.806.92 1.6 1.645 2.358.718.753 1.65 1.392 2.77 1.9 1.112.503 2.394.76 3.812.76 1.403 0 2.697-.226 3.85-.669a9.14 9.14 0 002.986-1.842 7.927 7.927 0 001.891-2.664 7.8 7.8 0 00.642-3.093 7.1 7.1 0 00-.024-.529"
                  fill="#332E09"
                  opacity={0.204}
                />
              </g>
            </svg>
          </div>
          {
            <div
              className="absolute flex flex-row justify-center items-center overflow-visible"
              style={{
                transition: '0.3s ease',
                width: 500,
                height: 500,
                transform: `translateY(${TY + 1800}px)`,
              }}
            >
              <svg
                height={'100%'}
                width={'100%'}
                viewBox="1 1.5 30 30"
                xmlns="http://www.w3.org/2000/svg"
              >
                //222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
                <g fill="none" fillRule="evenodd">
                  <path
                    d="M13.03 26.02h9.91c.986 0 1.74.202 2.258.607.52.405.778.956.778 1.652 0 .62-.205 1.145-.617 1.576-.41.43-1.034.645-1.869.645H9.518c-.949 0-1.689-.263-2.22-.788-.532-.525-.798-1.142-.798-1.851 0-.455.171-1.06.512-1.813.342-.753.715-1.344 1.12-1.774a109.069 109.069 0 014.556-4.49c1.354-1.246 2.323-2.066 2.905-2.458 1.037-.734 1.901-1.471 2.591-2.212.69-.74 1.215-1.499 1.575-2.278.361-.778.542-1.541.542-2.287 0-.81-.193-1.535-.579-2.174a4.013 4.013 0 00-1.576-1.49 4.55 4.55 0 00-2.174-.531c-1.657 0-2.96.727-3.91 2.183-.127.189-.339.708-.636 1.556-.297.848-.633 1.5-1.006 1.955-.374.456-.92.684-1.642.684-.633 0-1.158-.209-1.576-.627-.417-.417-.626-.987-.626-1.708 0-.873.196-1.784.588-2.734A7.85 7.85 0 018.92 5.082c.778-.772 1.766-1.396 2.962-1.87 1.195-.475 2.597-.712 4.204-.712 1.937 0 3.588.304 4.955.911a7.45 7.45 0 012.335 1.671 7.726 7.726 0 011.566 2.458c.373.93.56 1.895.56 2.895 0 1.569-.389 2.996-1.168 4.281-.778 1.284-1.572 2.29-2.382 3.018-.81.728-2.167 1.87-4.072 3.426-1.904 1.557-3.21 2.766-3.92 3.626-.304.342-.614.753-.93 1.234"
                    fill="#60a5fa"
                  />
                  <path
                    d="M13.03 26.02h9.91c.986 0 1.74.202 2.258.607.52.405.778.956.778 1.652 0 .62-.205 1.145-.617 1.576-.41.43-1.034.645-1.869.645H9.518c-.949 0-1.689-.263-2.22-.788-.532-.525-.798-1.142-.798-1.851 0-.455.171-1.06.512-1.813.342-.753.715-1.344 1.12-1.774a109.069 109.069 0 014.556-4.49c1.354-1.246 2.323-2.066 2.905-2.458 1.037-.734 1.901-1.471 2.591-2.212.69-.74 1.215-1.499 1.575-2.278.361-.778.542-1.541.542-2.287 0-.81-.193-1.535-.579-2.174a4.013 4.013 0 00-1.576-1.49 4.55 4.55 0 00-2.174-.531c-1.657 0-2.96.727-3.91 2.183-.127.189-.339.708-.636 1.556-.297.848-.633 1.5-1.006 1.955-.374.456-.92.684-1.642.684-.633 0-1.158-.209-1.576-.627-.417-.417-.626-.987-.626-1.708 0-.873.196-1.784.588-2.734A7.85 7.85 0 018.92 5.082c.778-.772 1.766-1.396 2.962-1.87 1.195-.475 2.597-.712 4.204-.712 1.937 0 3.588.304 4.955.911a7.45 7.45 0 012.335 1.671 7.726 7.726 0 011.566 2.458c.373.93.56 1.895.56 2.895 0 1.569-.389 2.996-1.168 4.281-.778 1.284-1.572 2.29-2.382 3.018-.81.728-2.167 1.87-4.072 3.426-1.904 1.557-3.21 2.766-3.92 3.626-.304.342-.614.753-.93 1.234h0z"
                    stroke="#2563eb"
                    // stroke="#3b82f6"
                    strokeLinejoin="round"
                  />
                  <path
                    d="M9.977 6.146c.629-.624 1.457-1.142 2.458-1.54C13.449 4.206 14.678 4 16.087 4"
                    stroke="#FFF"
                    strokeDasharray="1,2,6,2,3"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                  <path
                    d="M25.404 27.786a1.669 1.669 0 01-.406.723c-.312.326-.819.491-1.508.491H9.518c-.82 0-1.43-.21-1.869-.643a2.094 2.094 0 01-.579-.985c-.049.21-.07.376-.07.49 0 .574.212 1.063.65 1.495.437.432 1.048.643 1.868.643H23.49c.69 0 1.196-.165 1.508-.49.322-.338.48-.74.48-1.232 0-.179-.03-.34-.074-.492"
                    fill="#332E09"
                    opacity={0.204}
                  />
                </g>
              </svg>
            </div>
          }
          {
            <div
              className="absolute flex flex-row justify-center items-center overflow-visible"
              style={{
                transition: '0.3s ease',
                width: 500,
                height: 500,
                transform: `translateY(${TY + 2400}px)`,
              }}
            >
              <svg
                height={'100%'}
                width={'100%'}
                viewBox="4 1.5 30 30"
                xmlns="http://www.w3.org/2000/svg"
              >
                //11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
                <g fill="none" fillRule="evenodd">
                  <path
                    d="M17.881 27.476V10.489c-3.16 2.427-5.289 3.64-6.384 3.64-.523 0-.986-.208-1.39-.625-.405-.417-.607-.899-.607-1.447 0-.634.2-1.101.597-1.4.398-.298 1.101-.684 2.11-1.157 1.505-.709 2.71-1.456 3.611-2.24a15.247 15.247 0 002.4-2.632c.696-.971 1.15-1.568 1.362-1.792.211-.224.61-.336 1.194-.336.66 0 1.19.255 1.587.765.398.511.597 1.214.597 2.11v21.373c0 2.501-.852 3.752-2.557 3.752-.759 0-1.369-.255-1.829-.765-.46-.511-.69-1.263-.69-2.259"
                    fill="#60a5fa"
                  />
                  <path
                    d="M17.881 27.476V10.489c-3.16 2.427-5.289 3.64-6.384 3.64-.523 0-.986-.208-1.39-.625-.405-.417-.607-.899-.607-1.447 0-.634.2-1.101.597-1.4.398-.298 1.101-.684 2.11-1.157 1.505-.709 2.71-1.456 3.611-2.24a15.247 15.247 0 002.4-2.632c.696-.971 1.15-1.568 1.362-1.792.211-.224.61-.336 1.194-.336.66 0 1.19.255 1.587.765.398.511.597 1.214.597 2.11v21.373c0 2.501-.852 3.752-2.557 3.752-.759 0-1.369-.255-1.829-.765-.46-.511-.69-1.263-.69-2.259h0z"
                    stroke="#2563eb"
                    strokeLinejoin="round"
                  />
                  <path
                    d="M12.844 10.858c1.625-.766 2.956-1.595 3.959-2.467"
                    stroke="#FFF"
                    strokeDasharray="1,2,6,2,3"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                  <path
                    d="M20.401 29c-.617 0-1.093-.196-1.458-.601-.373-.413-.562-1.06-.562-1.923v1c0 .863.19 1.51.562 1.923.365.405.841.601 1.458.601.883 0 2.058-.337 2.058-3.252v-1c0 2.915-1.175 3.252-2.058 3.252"
                    fill="#332E09"
                    opacity={0.204}
                  />
                </g>
              </svg>
            </div>
          }
        </div>
      </div>
      <div
        className={`absolute bg-${frameColor
          .replace('600', '800')
          .replace('400', '600')}`}
        style={{
          transition: '0.3s ease-out',
          width: dimensions.width - 6,
          height: dimensions.height - 4.5,
          clipPath: dimensions.clipPath1,

          // clipPath: `polygon(18% 0%, 82% 0%, 100% 50%, 82% 100%, 18% 100%, 0% 50%,${``} 1.27% 50%, 18.7% 98.2%,${``} 81.3% 98.2%, 98.73% 50%, 81.3% 1.8%, 18.7% 1.8%,${``} 1.27% 50%, 0% 50%)`,
        }}
      ></div>
      <div
        className={`absolute bg-${frameColor
          .replace('600', '800')
          .replace('400', '600')} overflow-hidden`}
        style={{
          transition: '0.3s ease-out',
          width: dimensions.width + 6,
          height: dimensions.height + 4.5,
          clipPath: dimensions.clipPath1,
        }}
      ></div>
      <div
        className={`absolute bg-${frameColor}`}
        style={{
          transition: '0.3s ease-out',
          width: dimensions.width,
          height: dimensions.height,
          clipPath: dimensions.clipPath1,
        }}
      ></div>
      {/* <div className="flex flex-row gap-36">
        <button>
          ST?{started ? 1 : 0} -- starter: {starter} -- stopper: {stopper}
        </button>
        <button onClick={() => setTY((prev) => prev - 600)}>-</button>
        <button onClick={() => setTY((prev) => prev + 600)}>+</button>
      </div> */}
    </>
  )
}
